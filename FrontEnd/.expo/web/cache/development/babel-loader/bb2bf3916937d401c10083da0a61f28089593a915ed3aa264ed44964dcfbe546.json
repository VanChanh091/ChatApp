{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\20045291\\\\CNM\\\\BTL\\\\realtime-chat-app-main\\\\FrontEnd\\\\screens\\\\AddMemberGroupScreen.js\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport React, { useEffect } from \"react\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AddMemberGroupScreen(_ref) {\n  var _this = this;\n  var route = _ref.route;\n  var _route$params = route.params,\n    groupmembers = _route$params.groupmembers,\n    groupId = _route$params.groupId;\n  console.log(\"groupmembers:\", groupmembers);\n  console.log(\"groupId:\", groupId);\n  var _React$useState = React.useState([]),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    usersAdd = _React$useState2[0],\n    setUsersAdd = _React$useState2[1];\n  var navigation = useNavigation();\n  useEffect(function () {\n    var fetchUsers = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        try {\n          var response = yield fetch(\"http://localhost:8000/user\");\n          var data = yield response.json();\n          var users = data.map(function (user) {\n            return {\n              _id: user._id,\n              name: user.name,\n              image: user.image\n            };\n          });\n          var newUsers = users.filter(function (user) {\n            return !groupmembers.find(function (member) {\n              return member._id === user._id;\n            });\n          });\n          setUsersAdd(newUsers);\n        } catch (error) {\n          console.log(\"error fetching users\", error);\n        }\n      });\n      return function fetchUsers() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    fetchUsers();\n  }, []);\n  var handleAddMember = function () {\n    var _ref3 = _asyncToGenerator(function* (groupId, userId) {\n      try {\n        var response = yield fetch(`http://localhost:8000/add-user-to-group`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            groupId: groupId,\n            userId: userId\n          })\n        });\n        var data = yield response.json();\n        if (response.ok) {\n          console.log(\"add member successfully\", data);\n          Alert.alert(\"Success\", \"Add member successfully\");\n        } else {\n          console.log(\"error add member\", data);\n          Alert.alert(\"Error\", \"Add member error\");\n        }\n      } catch (error) {\n        console.log(\"error add member\", error);\n        Alert.alert(\"Error\", \"Add member error\");\n      }\n      var newUsers = usersAdd.filter(function (user) {\n        return user._id !== userId;\n      });\n      setUsersAdd(newUsers);\n    });\n    return function handleAddMember(_x, _x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return _jsxDEV(SafeAreaView, {\n    style: {\n      flex: 1\n    },\n    children: [_jsxDEV(ScrollView, {\n      style: {\n        maxHeight: \"70%\",\n        marginTop: \"10%\"\n      },\n      children: usersAdd.map(function (member) {\n        return _jsxDEV(View, {\n          style: {},\n          children: _jsxDEV(TouchableOpacity, {\n            onPress: function onPress() {\n              return handleAddMember(groupId, member._id);\n            },\n            style: {\n              flexDirection: \"row\",\n              margin: 10,\n              marginLeft: \"10%\",\n              alignItems: 'center',\n              padding: 10,\n              borderRadius: 10,\n              marginRight: \"10%\",\n              backgroundColor: \"#fff\",\n              shadowColor: \"#000\",\n              shadowOffset: {\n                width: 0,\n                height: 2\n              },\n              shadowOpacity: 0.25,\n              shadowRadius: 3.84,\n              elevation: 5\n            },\n            children: _jsxDEV(View, {\n              style: {\n                alignItems: 'center',\n                flexDirection: 'row',\n                justifyContent: 'center',\n                marginHorizontal: '20%'\n              },\n              children: [_jsxDEV(Image, {\n                source: {\n                  uri: member.image\n                },\n                style: {\n                  width: 50,\n                  height: 50,\n                  borderRadius: 50 / 2\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 17\n              }, _this), _jsxDEV(Text, {\n                style: {\n                  marginLeft: 10,\n                  fontSize: 20,\n                  fontWeight: 600\n                },\n                children: member.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, _this)\n        }, member._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: {\n        alignItems: \"center\"\n      },\n      children: _jsxDEV(TouchableOpacity, {\n        onPress: function onPress() {\n          return navigation.navigate(\"GroupChat\", {\n            groupId: groupId\n          });\n        },\n        style: {\n          alignItems: \"center\",\n          backgroundColor: \"green\",\n          width: \"30%\"\n        },\n        children: _jsxDEV(Text, {\n          style: {\n            fontSize: 30,\n            fontWeight: 600\n          },\n          children: \"Exit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"names":["React","useEffect","useNavigation","jsxDEV","_jsxDEV","AddMemberGroupScreen","_ref","_this","route","_route$params","params","groupmembers","groupId","console","log","_React$useState","useState","_React$useState2","_slicedToArray","usersAdd","setUsersAdd","navigation","fetchUsers","_ref2","_asyncToGenerator","response","fetch","data","json","users","map","user","_id","name","image","newUsers","filter","find","member","error","apply","arguments","handleAddMember","_ref3","userId","method","headers","body","JSON","stringify","ok","Alert","alert","_x","_x2","SafeAreaView","style","flex","children","ScrollView","maxHeight","marginTop","View","TouchableOpacity","onPress","flexDirection","margin","marginLeft","alignItems","padding","borderRadius","marginRight","backgroundColor","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","justifyContent","marginHorizontal","Image","source","uri","fileName","_jsxFileName","lineNumber","columnNumber","Text","fontSize","fontWeight","navigate"],"sources":["D:/20045291/CNM/BTL/realtime-chat-app-main/FrontEnd/screens/AddMemberGroupScreen.js"],"sourcesContent":["import {\n  View,\n  Text,\n  Image,\n  TouchableOpacity,\n  ScrollView,\n  Alert,\n  SafeAreaView,\n} from \"react-native\";\nimport React, { useEffect } from \"react\";\nimport { useNavigation } from \"@react-navigation/native\";\n\nexport default function AddMemberGroupScreen({ route }) {\n  const { groupmembers, groupId } = route.params;\n  console.log(\"groupmembers:\", groupmembers);\n  console.log(\"groupId:\", groupId);\n  const [usersAdd, setUsersAdd] = React.useState([]);\n  const navigation = useNavigation();\n  useEffect(() => {\n    // lấy tất cả user từ server\n    const fetchUsers = async () => {\n      try {\n        const response = await fetch(\"http://localhost:8000/user\");\n        const data = await response.json();\n\n        const users = data.map((user) => {\n          return {\n            _id: user._id,\n            name: user.name,\n            image: user.image,\n          };\n        });\n        // lọc ra những user chưa có trong group\n        const newUsers = users.filter(\n          (user) => !groupmembers.find((member) => member._id === user._id)\n        );\n        setUsersAdd(newUsers);\n      } catch (error) {\n        console.log(\"error fetching users\", error);\n      }\n    };\n    fetchUsers();\n  }, []);\n\n  const handleAddMember = async (groupId, userId) => {\n    try {\n      const response = await fetch(`http://localhost:8000/add-user-to-group`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ groupId: groupId, userId: userId }),\n      });\n      const data = await response.json();\n      if (response.ok) {\n        console.log(\"add member successfully\", data);\n        Alert.alert(\"Success\", \"Add member successfully\");\n        // quay lại màn hình trước đó\n      } else {\n        console.log(\"error add member\", data);\n        Alert.alert(\"Error\", \"Add member error\");\n      }\n    } catch (error) {\n      console.log(\"error add member\", error);\n      Alert.alert(\"Error\", \"Add member error\");\n    }\n    // cập nhật lại danh sách usersAdd\n    const newUsers = usersAdd.filter((user) => user._id !== userId);\n    setUsersAdd(newUsers);\n  };\n\n  return (\n    <SafeAreaView style={{ flex: 1 }}>\n      <ScrollView style={{ maxHeight: \"70%\", marginTop: \"10%\" }}>\n        {/* hiển thi danh sách thành viên trong Group */}\n        {usersAdd.map((member) => (\n          <View key={member._id} style={{}}>\n            <TouchableOpacity\n              onPress={() => handleAddMember(groupId, member._id)}\n              style={{\n                flexDirection: \"row\",\n                \n                margin: 10,\n                marginLeft: \"10%\",\n                alignItems:'center',\n                padding: 10,\n                borderRadius: 10,\n                marginRight: \"10%\",\n                backgroundColor: \"#fff\",\n                // đổ bóng cho thành viên\n                shadowColor: \"#000\",\n                shadowOffset: {\n                  width: 0,\n                  height: 2,\n                },\n                shadowOpacity: 0.25,\n                shadowRadius: 3.84,\n                elevation: 5,\n              }}\n            >\n              <View style={{alignItems:'center', flexDirection:'row',justifyContent:'center',marginHorizontal:'20%'}}>\n                <Image\n                  source={{ uri: member.image }}\n                  style={{ width: 50, height: 50, borderRadius: 50 / 2 }}\n                />\n                <Text style={{ marginLeft: 10, fontSize: 20, fontWeight: 600 }}>\n                  {member.name}\n                </Text>\n              </View>\n            </TouchableOpacity>\n          </View>\n        ))}\n      </ScrollView>\n      <View style={{ alignItems: \"center\" }}>\n        <TouchableOpacity\n          onPress={() => navigation.navigate(\"GroupChat\", { groupId: groupId })}\n          style={{\n            alignItems: \"center\",\n            backgroundColor: \"green\",\n            width: \"30%\",\n          }}\n        >\n          <Text style={{ fontSize: 30, fontWeight: 600 }}>Exit</Text>\n        </TouchableOpacity>\n      </View>\n    </SafeAreaView>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}